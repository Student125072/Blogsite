{{extend 'layout.html'}}

<head>
    <link rel="stylesheet" href="{{=URL('static', 'css/rant.css')}}">
</head>

<div class="row">

    <div class="col-lg-2 align-self-start tag-sort">
        <h3>Tags</h3>
        <a href="?tag=Front-end" class="tag-select">Front-end</a>
        <a href="?tag=Back-end" class="tag-select">Back-end</a>
        <a href="{{=URL('rant', 'feed')}}" class="tag-select"><i class="fa fa-times"></i></a>
    </div>

    <div class="col-lg-10 align-self-center">

        <div class="panel">
        {{for rant in rants:}}

            <div class="panel-body">
                <div class="media-block">
                    <a class="media-left" href="{{=URL('user', 'profile', vars={'username':rant.author.username})}}">
                    {{if rant.author.profile_picture:}}
                        <img class="img-circle img-sm rounded-circle" alt="Profile Picture"
                             src="{{=URL('default', 'download', args=rant.author.profile_picture)}}"
                             height="100" width="100">
                    {{pass}}
                    </a>
                    <div class="media-body">
                        <div class="mar-btm">
                            <a href="{{=URL('user', 'profile', vars={'username':rant.author.username})}}"
                               class="btn-link text-semibold media-heading box-inline">{{=rant.author.username}}</a>
                            <div class="row">
                                <p class="text-muted text-sm posted-at">{{=rant.posted_at.strftime('%d-%m-%Y %H:%M')}}</p>
                                <p class="tag text-muted">{{=rant.tag}}</p>
                            </div>
                        </div>
                    </div>
                    <div class="rant-content">
                        <a href="{{=URL('rant', 'view', vars={'id':rant.id})}}">
                            <h3>{{=rant.title}}</h3>
                            <p>{{=rant.description}}</p>
                        </a>
                        <a href="{{=URL('rant', 'view', vars={'id':rant.id})}}#comment">
                            <span style="color: grey;"><i class="fa fa-comment"></i> {{=rant.reply.count()}}</span>
                        </a>
                    </div>
                </div>
                <hr>
            </div>

        {{pass}}
        </div>

    </div>
</div>

{{def paginate():}}
{{if response.paginate_links:}}
<div class="pagination">
    <div class="paginate_back">
    {{response.paginate_links[0]}}
    </div>
    <div class="paginate_forw">
    {{=response.paginate_links[1]}}
    </div>
    <div class="paginate_loc">
    {{=response.paginate_links[2]}}
    </div>
</div>
{{pass}}
{{pass}}